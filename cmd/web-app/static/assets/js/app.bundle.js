!function(l){function t(t){for(var e,n,r=t[0],a=t[1],i=t[2],s=0,o=[];s<r.length;s++)n=r[s],Object.prototype.hasOwnProperty.call(u,n)&&u[n]&&o.push(u[n][0]),u[n]=0;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(l[e]=a[e]);for(h&&h(t);o.length;)o.shift()();return d.push.apply(d,i||[]),c()}function c(){for(var t,e=0;e<d.length;e++){for(var n=d[e],r=!0,a=1;a<n.length;a++){var i=n[a];0!==u[i]&&(r=!1)}r&&(d.splice(e--,1),t=s(s.s=n[0]))}return t}var n={},u={0:0},d=[];function s(t){if(n[t])return n[t].exports;var e=n[t]={i:t,l:!1,exports:{}};return l[t].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=l,s.c=n,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/assets/js/";var e=window.webpackJsonp=window.webpackJsonp||[],r=e.push.bind(e);e.push=t,e=e.slice();for(var a=0;a<e.length;a++)t(e[a]);var h=r;d.push([32,1]),c()}({16:function(t,e,n){"use strict";n.d(e,"a",function(){return r}),n.d(e,"b",function(){return a});var r=function(t){t.classList.add("d-none"),t.classList.add("d-hide")},a=function(t){t.classList.remove("d-none"),t.classList.remove("d-hide")}},32:function(t,e,n){"use strict";n.r(e);var r=n(5),a=n(31),i=(n(34),n(37),r.a.start()),s=n(39);i.load(Object(a.a)(s))},34:function(t,e,n){var r=n(35);"string"==typeof r&&(r=[[t.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(22)(r,a);r.locals&&(t.exports=r.locals)},35:function(t,e,n){(t.exports=n(21)(!1)).push([t.i,".body-block{font-size:5px}\n",""])},37:function(t,e,n){var r=n(38);"string"==typeof r&&(r=[[t.i,r,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(22)(r,a);r.locals&&(t.exports=r.locals)},38:function(t,e,n){(t.exports=n(21)(!1)).push([t.i,'.tile{width:100%;display:inline-block;box-sizing:border-box;background:#fff;padding:20px;margin-bottom:10px}.tile .title{margin-top:0}.tile p,.tile span,.tile a,.tile ul,.tile li,.tile button{font-family:inherit;font-size:inherit;font-weight:inherit;line-height:inherit}.tile h1,.tile h2,.tile h3,.tile h4,.tile h5,.tile h6{font-family:"Open Sans","Segoe UI",Frutiger,"Frutiger Linotype","Dejavu Sans","Helvetica Neue",Arial,sans-serif;line-height:1.5em;font-weight:300}.tile strong{font-weight:400}.tile.purple,.tile.blue,.tile.red,.tile.orange,.tile.green{color:#fff}.tile.gray{background:#eee;color:black}.tile.gray:hover{background:#e1e1e1}.tile.purple{background:#5133ab}.tile.purple:hover{background:#3e2784}.tile.red{background:#ac193d}.tile.red:hover{background:#7f132d}.tile.green{background:#00a600}.tile.green:hover{background:#007300}.tile.blue{background:#2672ec}.tile.blue:hover{background:#125acd}.tile.orange{background:#dc572e}.tile.orange:hover{background:#b8431f}\n',""])},39:function(t,e,n){var r={"./layout_controller.js":40,"./login_controller.js":43,"./payment_controller.js":62,"./prepPromo_controller.js":64,"./root_controller.js":65,"./subscription_controller.js":66};function a(t){var e=i(t);return n(e)}function i(t){if(n.o(r,t))return r[t];var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}a.keys=function(){return Object.keys(r)},a.resolve=i,(t.exports=a).id=39},40:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return g});var r=n(8),s=n.n(r),a=n(9),o=n.n(a),i=n(10),l=n.n(i),c=n(11),u=n.n(c),d=n(4),h=n.n(d),p=n(12),f=n.n(p),b=n(6),v=n.n(b),g=function(t){function i(){var t,e;s()(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=l()(this,(t=u()(i)).call.apply(t,[this].concat(r))),v()(h()(e),"navbarIsOpened",void 0),e}return f()(i,t),o()(i,[{key:"toggleNavbar",value:function(){this.navbarIsOpened?$(this.navbarTarget).slideUp():$(this.navbarTarget).slideDown(),this.navbarIsOpened=!this.navbarIsOpened}}],[{key:"targets",get:function(){return["navbar"]}}]),i}(n(5).b)},43:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return T});var r=n(1),o=n.n(r),a=n(13),i=n.n(a),s=n(8),l=n.n(s),c=n(9),u=n.n(c),d=n(10),h=n.n(d),p=n(11),f=n.n(p),b=n(12),v=n.n(b),g=n(5),m=n(14),y=n.n(m),T=function(t){function e(){return l()(this,e),h()(this,f()(e).apply(this,arguments))}var n;return v()(e,t),u()(e,[{key:"subscribe",value:(n=i()(o.a.mark(function t(){var e,s,n,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0===this.list.length)return window.alert("Please add a subject, period amd class to continue"),t.abrupt("return");t.next=3;break;case 3:if(this.loading)return t.abrupt("return");t.next=5;break;case 5:return this.loading=!0,e={count:this.list.length,subject_id:this.list[0].subject_id,class_id:this.list[0].class_id},s=this,t.next=10,y.a.post("/payments/initiate",e);case 10:if(n=t.sent,(r=n.data).error)return window.alert(r.error),s.loading=!1,t.abrupt("return");t.next=16;break;case 16:PaystackPop.setup({key:"pk_live_a669ccbde1c4d5509b6565af1131f87ea1af5ab6",email:r.student.parent_email,amount:r.amount,currency:"NGN",ref:r.id,metadata:{custom_fields:[{display_name:"Mobile Number",variable_name:"mobile_number",value:r.student.parent_phone}]},callback:function(){var e=i()(o.a.mark(function t(e){var n,r,a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],r=0;r<s.list.length;r++)n.push({subject_id:s.list[r].subject_id,class_id:s.list[r].class_id});return t.next=4,y.a.post("/payments/".concat(e.reference,"/update-status"),{items:n});case 4:a=t.sent,(i=a.data).error&&(s.loading=!1,window.alert(i.error)),window.alert("Success. Subscription successful, check the subscription table for your lesson' start date"),window.location.reload();case 9:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),onClose:function(){s.loading=!1,window.alert("window closed")}}).openIframe();case 18:case"end":return t.stop()}},t,this)})),function(){return n.apply(this,arguments)})}],[{key:"targets",get:function(){return["username","password"]}}]),e}(g.b)},62:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return O});var r=n(1),o=n.n(r),a=n(13),l=n.n(a),i=n(8),s=n.n(i),c=n(9),u=n.n(c),d=n(10),h=n.n(d),p=n(11),f=n.n(p),b=n(4),v=n.n(b),g=n(12),m=n.n(g),y=n(6),T=n.n(y),w=n(5),k=n(14),x=n.n(k),j=n(16),_=n(19),O=function(t){function i(){var t,e;s()(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=h()(this,(t=f()(i)).call.apply(t,[this].concat(r))),T()(v()(e),"list",void 0),T()(v()(e),"subjects",void 0),T()(v()(e),"classes",void 0),e}var e;return m()(i,t),u()(i,[{key:"connect",value:function(){this.list=[],this.classes=[],this.subjects=[];var e=this;Array.prototype.forEach.call(this.subjectTarget.options,function(t){""!==t.value&&e.subjects.push({id:t.value,label:t.innerText})}),Array.prototype.forEach.call(this.classTarget.options,function(t){""!==t.value&&e.classes.push({id:t.value,label:t.innerText})})}},{key:"addToList",value:function(){var t=this.subjectTarget.value,e=this.classTarget.value;if(""!==t&&""!==e){var n=t+e;_.a.find(this.list,function(t){return t.id===n})?window.alert("Select subject exists for the specified period and class"):(this.list.push({id:n,subject_id:t,class_id:e,subject:this.subjectTarget.options[this.subjectTarget.selectedIndex].innerText,className:this.classTarget.options[this.classTarget.selectedIndex].innerText}),this.displayList(),this.subjectTarget.value="")}else window.alert("Subject, period amd class are required")}},{key:"removeFromList",value:function(t){var e=t.currentTarget.getAttribute("data-id");_.a.remove(this.list,function(t){return t.id===e}),this.displayList()}},{key:"displayList",value:function(){var a=this;this.listTblTarget.innerHTML="",this.cartTotal=0,this.list.forEach(function(t,e){var n=document.importNode(a.itemTemplateTarget.content,!0),r=n.querySelectorAll("td");r[0].innerText=e+1,r[1].innerText=t.className,r[2].innerText=t.subject,r[3].innerHTML='<button data-action="click->payment#removeFromList" data-id="'.concat(t.id,'">Remove</button>'),a.listTblTarget.appendChild(n)});var t=this.list.length;if(5<=t){var e=(t-t%5)/5;this.cartTotal=15e3*e,t-=5*e}if(3<=t){var n=(t-t%3)/3;this.cartTotal+=12e3*n,t-=3*n}this.cartTotal+=5e3*t,this.cartTotalTarget.textContent=this.cartTotal;var r=5e3*this.list.length-this.cartTotal,i=100*r/this.cartTotal;this.savingsTarget.textContent="".concat(r," (").concat(i.toFixed(0),"%)"),(0<this.list.length?Object(j.b):Object(j.a))(this.cartItemDivTarget)}},{key:"subscribe",value:(e=l()(o.a.mark(function t(){var e,s,n,r;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0===this.list.length)return window.alert("Please add a subject, period amd class to continue"),t.abrupt("return");t.next=3;break;case 3:if(this.loading)return t.abrupt("return");t.next=5;break;case 5:return this.loading=!0,e={count:this.list.length,subject_id:this.list[0].subject_id,class_id:this.list[0].class_id},s=this,t.next=10,x.a.post("/payments/initiate",e);case 10:if(n=t.sent,(r=n.data).error)return window.alert(r.error),s.loading=!1,t.abrupt("return");t.next=16;break;case 16:PaystackPop.setup({key:"pk_test_6e0424ff8e08138c2fcce3f4f2b05052c4b3f77c",email:r.student.parent_email,amount:r.amount,currency:"NGN",ref:r.id,metadata:{custom_fields:[{display_name:"Mobile Number",variable_name:"mobile_number",value:r.student.parent_phone}]},callback:function(){var e=l()(o.a.mark(function t(e){var n,r,a,i;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],r=0;r<s.list.length;r++)n.push({subject_id:s.list[r].subject_id,class_id:s.list[r].class_id});return t.next=4,x.a.post("/payments/".concat(e.reference,"/update-status"),{items:n});case 4:a=t.sent,(i=a.data).error&&(s.loading=!1,window.alert(i.error)),window.alert("Success. Subscription successful, check the subscription table for your lesson' start date"),window.location.reload();case 9:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}(),onClose:function(){s.loading=!1,window.alert("window closed")}}).openIframe();case 18:case"end":return t.stop()}},t,this)})),function(){return e.apply(this,arguments)})}],[{key:"targets",get:function(){return["class","subject","cartItemDiv","listTbl","itemTemplate","cartTotal","savings"]}}]),i}(w.b)},64:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return j});var r=n(1),s=n.n(r),a=n(13),o=n.n(a),i=n(8),l=n.n(i),c=n(9),u=n.n(c),d=n(10),h=n.n(d),p=n(11),f=n.n(p),b=n(4),v=n.n(b),g=n(12),m=n.n(g),y=n(6),T=n.n(y),w=n(5),k=n(14),x=n.n(k),j=function(t){function i(){var t,e;l()(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=h()(this,(t=f()(i)).call.apply(t,[this].concat(r))),T()(v()(e),"loading",void 0),e}var e;return m()(i,t),u()(i,[{key:"getStarted",value:(e=o()(s.a.mark(function t(e){var n,r,a,i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),""===this.classTarget.value||""===this.nameTarget.value||""===this.phoneTarget.value||""===this.emailTarget.value)return window.alert("Please enter your name, email and phone number to continue"),t.abrupt("return");t.next=4;break;case 4:if(this.loading)return t.abrupt("return");t.next=6;break;case 6:return this.loading=!0,n={class_id:this.classTarget.value,name:this.nameTarget.value,phone:this.phoneTarget.value,email:this.emailTarget.value},r=this,t.prev=9,t.next=12,x.a.post("/api/v1/get-started",n);case 12:if(a=t.sent,(i=a.data).error)return window.alert(i.error),r.loading=!1,t.abrupt("return");t.next=18;break;case 18:window.location.href="/thank-you",t.next=26;break;case 21:t.prev=21,t.t0=t.catch(9),console.log(t.t0),this.loading=!1,window.alert(t.t0);case 26:case"end":return t.stop()}},t,this,[[9,21]])})),function(t){return e.apply(this,arguments)})}],[{key:"targets",get:function(){return["class","name","email","phone"]}}]),i}(w.b)},65:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return j});var r=n(1),o=n.n(r),a=n(13),s=n.n(a),i=n(8),l=n.n(i),c=n(9),u=n.n(c),d=n(10),h=n.n(d),p=n(11),f=n.n(p),b=n(4),v=n.n(b),g=n(12),m=n.n(g),y=n(6),T=n.n(y),w=n(5),k=n(14),x=n.n(k),j=function(t){function i(){var t,e;l()(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=h()(this,(t=f()(i)).call.apply(t,[this].concat(r))),T()(v()(e),"loading",void 0),e}var e;return m()(i,t),u()(i,[{key:"getStarted",value:(e=s()(o.a.mark(function t(e){var n,r,a,i,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),""===this.classTarget.value||""===this.nameTarget.value||""===this.phoneTarget.value||""===this.emailTarget.value)return window.alert("Please select your class and enter your name, email and phone number to continue"),t.abrupt("return");t.next=4;break;case 4:if(this.loading)return t.abrupt("return");t.next=6;break;case 6:return this.loading=!0,n={class_id:this.classTarget.value,name:this.nameTarget.value,phone:this.phoneTarget.value,email:this.emailTarget.value},r=this,t.prev=9,t.next=12,x.a.post("/api/v1/get-started",n);case 12:if(a=t.sent,(i=a.data).error)return window.alert(i.error),this.messageTarget.textContent=i.error,r.loading=!1,t.abrupt("return");t.next=19;break;case 19:window.location.href="/thank-you",t.next=33;break;case 22:if(t.prev=22,t.t0=t.catch(9),this.loading=!1,t.t0.response)return s=t.t0.response.data,console.log(s),this.messageTarget.textContent=s.details,window.alert(s.details),t.abrupt("return");t.next=31;break;case 31:window.alert("An unknown error has caused the request to fail"),console.log(t.t0);case 33:case"end":return t.stop()}},t,this,[[9,22]])})),function(t){return e.apply(this,arguments)})}],[{key:"targets",get:function(){return["class","name","email","phone","message"]}}]),i}(w.b)},66:function(t,e,n){"use strict";n.r(e),n.d(e,"default",function(){return O});var r=n(1),a=n.n(r),i=n(13),s=n.n(i),o=n(8),l=n.n(o),c=n(9),u=n.n(c),d=n(10),h=n.n(d),p=n(11),f=n.n(p),b=n(4),v=n.n(b),g=n(12),m=n.n(g),y=n(6),T=n.n(y),w=n(5),k=n(14),x=n.n(k),j=n(16),_=n(19),O=function(t){function i(){var t,e;l()(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=h()(this,(t=f()(i)).call.apply(t,[this].concat(r))),T()(v()(e),"list",void 0),T()(v()(e),"subjects",void 0),T()(v()(e),"classes",void 0),e}var e;return m()(i,t),u()(i,[{key:"connect",value:function(){this.list=[],this.subjects=[];var e=this;Array.prototype.forEach.call(this.subjectTarget.options,function(t){""!==t.value&&e.subjects.push({id:t.value,label:t.innerText})})}},{key:"addToList",value:function(){var t=this.subjectTarget.value;if(""!==t){var e=t;_.a.find(this.list,function(t){return t.subject_id===e})?window.alert("Select subject exists"):(this.list.push({subject_id:t,subject:this.subjectTarget.options[this.subjectTarget.selectedIndex].innerText}),this.displayList(),this.subjectTarget.value="")}else window.alert("Subject is required")}},{key:"removeFromList",value:function(t){var e=t.currentTarget.getAttribute("data-id");_.a.remove(this.list,function(t){return t.subject_id===e}),this.displayList()}},{key:"displayList",value:function(){var a=this;this.listTblTarget.innerHTML="",this.cartTotal=0,this.list.forEach(function(t,e){var n=document.importNode(a.itemTemplateTarget.content,!0),r=n.querySelectorAll("td");r[0].innerText=e+1,r[1].innerText=t.subject,r[2].innerHTML='<button data-action="click->subscription#removeFromList" data-id="'.concat(t.id,'">Remove</button>'),a.listTblTarget.appendChild(n)});var t=this.list.length;if(5<=t){var e=(t-t%5)/5;this.cartTotal=15e3*e,t-=5*e}if(3<=t){var n=(t-t%3)/3;this.cartTotal+=12e3*n,t-=3*n}this.cartTotal+=5e3*t,this.cartTotalTarget.textContent=this.cartTotal;var r=5e3*this.list.length-this.cartTotal,i=100*r/this.cartTotal;this.savingsTarget.textContent="".concat(r," (").concat(i.toFixed(0),"%)"),(0<this.list.length?Object(j.b):Object(j.a))(this.cartItemDivTarget)}},{key:"save",value:(e=s()(a.a.mark(function t(e){var n,r;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.preventDefault(),0===this.list.length)return window.alert("Please add a subject"),t.abrupt("return");t.next=4;break;case 4:if(this.loading)return t.abrupt("return");t.next=6;break;case 6:this.loading=!0,n={student_reg_no:this.regNoTarget.value,start_date:this.startDateTarget.value,end_date:this.endDateTarget.value,items:this.list.map(function(t){return{subject_id:t.subject_id}})},r=this,x.a.post("/admin/subscriptions/create",n).then(function(){window.location.href="/admin/subscriptions"}).catch(function(t){var e=t.response.data.details;r.loading=!1,console.log(t),window.alert(e)});case 10:case"end":return t.stop()}},t,this)})),function(t){return e.apply(this,arguments)})}],[{key:"targets",get:function(){return["regNo","startDate","endDate","subject","cartItemDiv","listTbl","itemTemplate","cartTotal","savings"]}}]),i}(w.b)}});
//# sourceMappingURL=app.bundle.js.map